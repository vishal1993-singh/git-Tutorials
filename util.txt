utility functions for version three.